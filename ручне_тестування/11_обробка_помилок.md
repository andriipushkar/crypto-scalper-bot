# Тести обробки помилок

## 1. Network Errors

### TC-284: Internet disconnect
**Кроки:**
1. Вимкнути інтернет
2. Спробувати виконати дію

**Очікуваний результат:**
- [ ] Error message "Network error"
- [ ] UI не крашиться
- [ ] Reconnect при відновленні

### TC-285: Slow network
**Кроки:**
1. Симулювати slow network (DevTools -> Network -> Slow 3G)
2. Виконати операції

**Очікуваний результат:**
- [ ] Loading indicators
- [ ] Timeout handling
- [ ] Retry logic

### TC-286: DNS failure
**Кроки:**
1. Блокувати DNS для exchange

**Очікуваний результат:**
- [ ] Clear error message
- [ ] Fallback options (якщо є)

---

## 2. API Errors

### TC-287: 400 Bad Request
**Кроки:**
1. Викликати API з invalid parameters

**Очікуваний результат:**
- [ ] Error message зрозуміле
- [ ] Specific field validation errors
- [ ] No crash

### TC-288: 401 Unauthorized
**Кроки:**
1. Виконати запит без auth token

**Очікуваний результат:**
- [ ] Redirect to login
- [ ] Token refresh attempt

### TC-289: 403 Forbidden
**Кроки:**
1. Спробувати доступ до restricted resource

**Очікуваний результат:**
- [ ] "Access denied" message
- [ ] Suggest correct permissions

### TC-290: 404 Not Found
**Кроки:**
1. Запит неіснуючого ресурсу

**Очікуваний результат:**
- [ ] "Not found" message
- [ ] Graceful handling

### TC-291: 429 Rate Limited
**Кроки:**
1. Викликати rate limit

**Очікуваний результат:**
- [ ] "Too many requests" message
- [ ] Retry-After header respected
- [ ] Countdown до retry

### TC-292: 500 Internal Server Error
**Кроки:**
1. Викликати server error

**Очікуваний результат:**
- [ ] Generic error message
- [ ] No sensitive info leak
- [ ] Error logged server-side

### TC-293: 502/503/504 Gateway Errors
**Кроки:**
1. Simulate backend unavailability

**Очікуваний результат:**
- [ ] "Service unavailable" message
- [ ] Retry with backoff

---

## 3. Exchange Errors

### TC-294: Exchange maintenance
**Кроки:**
1. Exchange на maintenance

**Очікуваний результат:**
- [ ] "Exchange under maintenance"
- [ ] ETA якщо доступний
- [ ] Auto-reconnect checking

### TC-295: Invalid symbol error
**Кроки:**
1. Спробувати trade невалідний символ

**Очікуваний результат:**
- [ ] "Invalid symbol" error
- [ ] Symbol не додається

### TC-296: Insufficient balance (exchange)
**Кроки:**
1. Спробувати order більший за balance

**Очікуваний результат:**
- [ ] "Insufficient balance" from exchange
- [ ] Available balance shown

### TC-297: Order rejected
**Кроки:**
1. Exchange відхилив order

**Очікуваний результат:**
- [ ] Specific rejection reason
- [ ] Order не створено
- [ ] Balance не змінився

### TC-298: Position limit exceeded
**Кроки:**
1. Досягти exchange position limit

**Очікуваний результат:**
- [ ] "Position limit exceeded"
- [ ] Current limits shown

---

## 4. Validation Errors

### TC-299: Invalid input format
**Кроки:**
1. Ввести text замість number
2. Ввести negative де потрібен positive
3. Ввести занадто довгий string

**Очікуваний результат:**
- [ ] Field-specific validation error
- [ ] Red border на field
- [ ] Submit blocked

### TC-300: Required field missing
**Кроки:**
1. Залишити required field пустим

**Очікуваний результат:**
- [ ] "Field is required" error
- [ ] Form не submit

### TC-301: Out of range values
**Кроки:**
1. Ввести leverage 200x (max 125)
2. Ввести quantity занадто маленьку

**Очікуваний результат:**
- [ ] "Value out of range" error
- [ ] Min/Max shown

---

## 5. WebSocket Errors

### TC-302: WebSocket connection failed
**Кроки:**
1. Block WebSocket port

**Очікуваний результат:**
- [ ] "Connection failed" message
- [ ] Retry indicator
- [ ] Fallback to REST polling (optional)

### TC-303: WebSocket message parsing error
**Кроки:**
1. Server sends malformed message

**Очікуваний результат:**
- [ ] Error logged
- [ ] Connection stays open
- [ ] UI не крашиться

### TC-304: WebSocket timeout
**Кроки:**
1. No messages for extended time

**Очікуваний результат:**
- [ ] Ping/pong health check
- [ ] Reconnect if needed

---

## 6. Data Errors

### TC-305: Invalid data from API
**Кроки:**
1. API returns unexpected format

**Очікуваний результат:**
- [ ] Error handling
- [ ] Default values used
- [ ] Error logged

### TC-306: Missing required data
**Кроки:**
1. API response missing fields

**Очікуваний результат:**
- [ ] Graceful degradation
- [ ] Partial data shown
- [ ] Warning для missing

### TC-307: NaN/Infinity values
**Кроки:**
1. Calculate results in NaN

**Очікуваний результат:**
- [ ] Displayed as "N/A" or "-"
- [ ] No JavaScript errors
- [ ] Calculations continue

---

## 7. Concurrency Errors

### TC-308: Duplicate order submission
**Кроки:**
1. Double-click на Order button

**Очікуваний результат:**
- [ ] Button disabled after first click
- [ ] Only one order created
- [ ] Loading indicator

### TC-309: Race condition in position update
**Кроки:**
1. Multiple updates simultaneously

**Очікуваний результат:**
- [ ] Data consistency maintained
- [ ] Latest state shown
- [ ] No phantom positions

### TC-310: Stale data override
**Кроки:**
1. Edit something, another update comes

**Очікуваний результат:**
- [ ] Conflict resolution
- [ ] User warned if needed

---

## 8. Recovery & Resilience

### TC-311: Auto-recovery after error
**Кроки:**
1. Викликати recoverable error
2. Почекати

**Очікуваний результат:**
- [ ] System recovers automatically
- [ ] Normal operation resumes
- [ ] Error logged for analysis

### TC-312: Graceful degradation
**Кроки:**
1. One subsystem fails (напр. analytics)

**Очікуваний результат:**
- [ ] Core trading continues
- [ ] Failed feature disabled
- [ ] User notified

### TC-313: Circuit breaker
**Кроки:**
1. Multiple failures in short time

**Очікуваний результат:**
- [ ] Circuit opens
- [ ] Requests stopped temporarily
- [ ] Auto-retry after cooldown

---

## 9. Error Messages Quality

### TC-314: Error message clarity
**Кроки:**
1. Review various error messages

**Очікуваний результат:**
- [ ] User-friendly language
- [ ] Actionable suggestions
- [ ] No technical jargon

### TC-315: Error codes
**Кроки:**
1. Check error codes format

**Очікуваний результат:**
- [ ] Unique error codes
- [ ] Searchable in docs
- [ ] Support reference

### TC-316: Localized error messages
**Кроки:**
1. Change language (якщо підтримується)

**Очікуваний результат:**
- [ ] Errors in selected language
- [ ] Consistent translation

---

## 10. Error Logging & Monitoring

### TC-317: Error logging
**Кроки:**
1. Викликати error
2. Перевірити logs

**Очікуваний результат:**
- [ ] Error logged with details
- [ ] Stack trace (server-side)
- [ ] Request context

### TC-318: Error alerting
**Кроки:**
1. Critical error occurs

**Очікуваний результат:**
- [ ] Alert sent (Telegram/Email)
- [ ] Error details included
- [ ] Severity level

### TC-319: Error analytics
**Кроки:**
1. Review error dashboard (якщо є)

**Очікуваний результат:**
- [ ] Error frequency
- [ ] Error types breakdown
- [ ] Trends over time
